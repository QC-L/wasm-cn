<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="keywords" content="WebAssembly,wasm,中文,文档,中文文档">
  <meta name="description" content="WebAssembly 中文文档">
  <title>不确定性 - WebAssembly</title>
  <link rel="stylesheet" type="text/css" href="/css/custom.css">
</head>


<body>
  <header class="page-section-spacious">
    <div class="container">
    <div class="site-logo">
      <h1 class="title">WebAssembly</h1>
    </div>
    <nav class="site-nav">
      <a class="site-nav-item btn" href="/">总览</a>
      <a class="site-nav-item btn" href="/demo/">实例</a>
      <a class="site-nav-item btn" href="/getting-started/developers-guide/">快速开始</a>
      
      
      <a class="site-nav-item btn" href="/docs/js/">文档</a>
      <a class="site-nav-item btn" href="/community/feedback/">社区</a>
      <a class="site-nav-item btn" href="/roadmap/">规划</a>
      <a class="site-nav-item btn" href="/docs/faq/">问答</a>
      <a href="https://github.com/int64ago/wasm-cn" target="_blank">
        <img style="vertical-align: middle" width="74" height="20" src="https://img.shields.io/github/stars/int64ago/wasm-cn.svg?style=social&amp;label=Star">
      </a>
    </nav>
    </div>
  </header>
  <section class="banner-update">
    <div class="container">
      <div class="banner-update-icon"></div>
      <span class="banner-update-date"></span>
      <span>WebAssembly 初版规范已由各个浏览器厂商达成共识，<a href="/roadmap/">了解更多</a></span>
    </div>
  </section>
  

<section>
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-lg-9 col-pop">
        <h1 id="不确定性">不确定性</h1>

<p>WebAssembly is a <a href="../portability/">portable</a> <a href="../security/">sandboxed</a> platform
with limited, local, nondeterminism.</p>

<ul>
  <li>
<em>Limited</em>: nondeterministic execution can only occur in a small number of
well-defined cases (described below) and, in those cases, the implementation
may select from a limited set of possible behaviors.</li>
  <li>
<em>Local</em>: when nondeterministic execution occurs, the effect is local,
there is no “spooky action at a distance”.</li>
</ul>

<p>The <a href="../rationale/">rationale</a> document details why WebAssembly is designed as
detailed in this document.</p>

<p>The following is a list of the places where the WebAssembly specification
currently admits nondeterminism:</p>

<ul>
  <li>New features will be added to WebAssembly, which means different implementations
will have different support for each feature. This can be detected with
<code class="highlighter-rouge">has_feature</code>, but is still a source of differences between executions.</li>
  <li>
<a href="../future-features/#threads">When threads are added as a feature <img class="emoji" title=":unicorn:" alt=":unicorn:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f984.png" height="20" width="20" align="absmiddle"></a>, even without
shared memory, nondeterminism will be visible through the global sequence of
API calls. With shared memory, the result of load operators is
nondeterministic.</li>
  <li>Except when otherwise specified, when an arithmetic operator returns NaN,
there is nondeterminism in determining the specific bits of the NaN. However,
wasm does still provide the guarantee that NaN values returned from an operation
will not have 1 bits in their fraction field that aren’t set in any NaN values
in the input operands, except for the most significant bit of the fraction field
(which most operators set to 1).</li>
  <li>Except when otherwise specified, when an arithmetic operator with a floating
point result type receives no NaN input values and produces a NaN result
value, the sign bit of the NaN result value is nondeterministic.</li>
  <li>
<a href="../future-features/#fixed-width-simd">Fixed-width SIMD may want some flexibility <img class="emoji" title=":unicorn:" alt=":unicorn:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f984.png" height="20" width="20" align="absmiddle"></a>
    <ul>
      <li>In SIMD.js, floating point values may or may not have subnormals flushed to
zero.</li>
      <li>In SIMD.js, operators ending in “Approximation” return approximations that
may vary between platforms.</li>
    </ul>
  </li>
  <li>Environment-dependent resource limits may be exhausted. A few examples:
    <ul>
      <li>Memory allocation may fail.</li>
      <li>The runtime can fail to allocate a physical page when a memory location is first
accessed (e.g. through a load or store), even if that memory was virtually reserved
by the maximum size property of the <a href="../modules/#linear-memory-section">memory section</a>.</li>
      <li>Program stack may get exhausted (e.g., because function call depth is too big,
or functions have too many locals, or infinite recursion). Note that this stack
isn’t located in the program-accessible linear memory.</li>
      <li>Resources such as handles may get exhausted.</li>
      <li>Any other resource could get exhausted at any time. Caveat emptor.</li>
    </ul>
  </li>
</ul>

<p>Users of C, C++, and similar languages should be aware that operators which
have defined or constrained behavior in WebAssembly itself may nonetheless still
have undefined behavior
<a href="../c-and-c++/#undefined-behavior">at the source code level</a>.</p>


      </div>
      <div class="col-xs-12 col-lg-3">
        <h6 class="side-title">文档</h6>
        <nav class="side-nav">
        
        
          
          <a class="side-nav-item" href="/docs/js/">JavaScript API</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="side-nav-item" href="/docs/binary-encoding/">二进制编码</a>
          
        
          
          <a class="side-nav-item" href="/docs/c-and-c++/">C/C++ 开发指南</a>
          
        
          
        
          
          <a class="side-nav-item" href="/docs/dynamic-linking/">动态链接</a>
          
        
          
        
          
          <a class="side-nav-item" href="/docs/faq/">问答</a>
          
        
          
          <a class="side-nav-item" href="/docs/feature-test/">特性测试</a>
          
        
          
          <a class="side-nav-item" href="/docs/future-features/">未来支持特性</a>
          
        
          
          <a class="side-nav-item" href="/docs/gc/">GC / DOM / Web API 集成 future general</a>
          
        
          
          <a class="side-nav-item" href="/docs/high-level-goals/">WebAssembly 整体目标</a>
          
        
          
          <a class="side-nav-item" href="/docs/jit-library/">JIT 和优化</a>
          
        
          
          <a class="side-nav-item" href="/docs/mvp/">最小可行产品</a>
          
        
          
          <a class="side-nav-item" href="/docs/modules/">模块</a>
          
        
          
          <a class="side-nav-item" href="/docs/non-web/">非 Web 环境集成</a>
          
        
          
          <a class="side-nav-item" href="/docs/nondeterminism/">不确定性</a>
          
        
          
          <a class="side-nav-item" href="/docs/portability/">可移植性</a>
          
        
          
          <a class="side-nav-item" href="/docs/rationale/">设计原理</a>
          
        
          
          <a class="side-nav-item" href="/docs/security/">安全</a>
          
        
          
          <a class="side-nav-item" href="/docs/semantics/">语义</a>
          
        
          
          <a class="side-nav-item" href="/docs/text-format/">文本格式</a>
          
        
          
          <a class="side-nav-item" href="/docs/tooling/">工具支持</a>
          
        
          
          <a class="side-nav-item" href="/docs/use-cases/">使用场景</a>
          
        
          
          <a class="side-nav-item" href="/docs/web/">Web 环境集成</a>
          
        
        </nav>
      </div>
    </div>
  </div>
</section>
</body>
</html>
